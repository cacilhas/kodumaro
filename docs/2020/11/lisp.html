<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatibile" content="IE=edge" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Cache-Control" content="no-cache" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="language" content="en" />
    <meta name="copyright" content="CC-BY 4.0" />
    <meta name="url" content="//kodumaro.cacilhas.info/2020/11/lisp.html" />
    <meta name="date" content="Nov. 03, 2020" />
    <meta name="search_date" content="2020-11-03" />
    <meta name="author" content="Arĥimedeς Montegasppα Cacilhας" />
    <meta property="og:site_name" content="Kodumaro" />
    <meta property="og:title" content="LISP" />
    <meta property="og:url" content="//kodumaro.cacilhas.info/2020/11/lisp.html" />
    <meta property="og:image" content="//cacilhas.info/img/lisp.png" />
    <meta property="article:author" content="Arĥimedeς Montegasppα Cacilhας" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Kavivanar" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto&amp;subset=latin-ext" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:i,bold&amp;subset=latin-ext" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto+Mono" />
    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/animate.min.css" />
    <link rel="stylesheet" href="/css/bootstrap-dropdownhover.min.css" />
    <link rel="stylesheet" href="/css/ie10-viewport-bug-workaround.css" />
    <link rel="stylesheet" href="/css/bootstrap-theme.min.css" />
    <link rel="stylesheet" href="/css/theme.css" />
    <link rel="stylesheet" href="/css/kodumaro.css" />
    <link rel="stylesheet" href="//cacilhas.info/css/cacilhas.css" />
    <title>LISP</title>
    <link rel="icon" href="/img/favicon.ico" />
    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
    <script src="//cacilhas.info/js/ie-emulation-modes-warning.js"></script>
    <script src="//cacilhas.info/js/jquery.min.js"></script>
    <script src="//cacilhas.info/js/bootstrap-dropdownhover.min.js"></script>
    <script src="//cacilhas.info/js/handle-old-url.js"></script>
    <script src="//cacilhas.info/js/alt-title.js"></script>
    <script src="//cacilhas.info/js/anchors.js"></script>
    <script async="async" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-5741846017654057",
        enable_page_level_ads: true,
      })
    </script>
    <script>
      (function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date;a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,"script","https://www.google-analytics.com/analytics.js","ga")
      ga("create", "UA-99357497-1", "auto")
      ga("send", "pageview")
    </script>
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button class="navbar-toggle collapsed" type="button" data-togge="collapse" data-target="#navbar" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="dropdown">
            <span class="navbar-brand dropdown-toggle" data-toggle="dropdown" data-hover="dropdown">ℭacilhας.INFO</span>
            <ul class="dropdown-menu">
              <li><a href="//cacilhas.info/"><i class="glyphicon glyphicon-home"></i>&nbsp;ℭacilhας.INFO</a></li>
              <li><a href="//kodumaro.cacilhas.info/"><i class="licon icon-kodumaro"></i>&nbsp;Kodumaro</a></li>
              <li><a href="//montegasppa.cacilhas.info/"><i class="licon icon-montegasppa"></i>&nbsp;ℳontegasppα and Giulia C.’s Thoughts</a></li>
              <li><hr/></li>
              <li><a href="//cacilhas.info/maven" target="_blank"><i class="licon icon-maven"></i>&nbsp;Kodumaro Maven Repository</a></li>
              <li><a href="https://claudiotorcato.wordpress.com/" target="_blank"><i class="licon icon-wordpress"></i>&nbsp;Mosaico Livre</a></li>
              <li><a href="https://waltercruz.com/" target="_blank"><i class="glyphicon glyphicon-link"></i>&nbsp;Walter Cruz</a></li>
              <li><a href="" target="_blank"><i class="licon icon-dev-to"></i>&nbsp;</a></li>
            </ul>
          </div>
        </div>
        <div class="collapse navbar-collapse" id="navbar">
          <ul class="nav navbar-nav">
            <li><a href="//kodumaro.cacilhas.info"><i class="glyphicon glyphicon-home"></i>&nbsp;Home</a></li>
            <li class="active"><a href="//kodumaro.cacilhas.info/2020/11/lisp.html">LISP</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h2 class="mg-title">LISP</h2>
          <h6 class="pull-right">2020-11-03</h6>
          <h6>The shadows behind the code.</h6>
        </div>
        <div class="panel-body">
          <p class="pull-right" > <img src="//cacilhas.info/img/lisp.png" alt="Made with secret alien technology" /></p>
<p class="mg-first" > LISP is a specification by <a href="http://www.genealogy.ams.org/id.php?id=22145">John McCarthy</a>,
that has started a whole programming language family since 1958. It’s based on
<a href="https://en.wikipedia.org/wiki/Lambda_calculus">λ-calculus</a>, formal system from <a href="http://www.genealogy.ams.org/id.php?id=8011">Alonzo Church</a>’s
work in 1930s, designed to deal with symbolic data instead of numeric, most
imperative languages’ standard.</p>
<p>LISP means “list processing,” and list is the specification main structure.
Every data – as the code itself – are represented as lists.</p>
<p>For instance, the sum of 1 and 2:</p>
<pre class="prettyprint"><code class="lisp language-lisp">(+ 1 2)</code></pre>
<p>Which is a list of the elements <code>+</code>, <code>1</code>, and <code>2</code>. This list is processed by the
<code>car</code> (head) and <code>cdr</code> (tail) functions:</p>
<pre class="prettyprint"><code class="lisp language-lisp">(+ . (1 2))</code></pre>
<p><code>car</code> and <code>cdr</code> are <a href="https://en.wikipedia.org/wiki/IBM_704">IBM 704</a> instructions, the system where LISP was
formost developed. CAR means “Contents of the Address part of Register number”
and CDR means “Contents of the Decrement part of Register number.”</p>
<p>The head represents a lambda function, and the tail the parameters. In this
case, the function is <code>'+</code>, which returns the sum of the parameters.</p>
<p>The LISP family most important languages are <a href="https://common-lisp.net/">Common Lisp</a>,
<a href="https://www.gnu.org/software/emacs/manual/html_node/eintr/">Emacs LISP</a>, <a href="http://www.schemers.org/">Scheme</a>, and <a href="https://clojure.org/">Clojure</a>.</p>
<p>Let’s take a look at the factorial implementation in three LISP languages. First
in Common Lisp:</p>
<pre class="prettyprint"><code class="lisp language-lisp">(defun factorial (n)
  (if (= n 0)
    1
    (* n (factorial (- n 1)))))</code></pre>
<p>In R⁵RS (Scheme):</p>
<pre class="prettyprint"><code class="scheme language-scheme">(define factorial
  (lambda (n)
    (if (zero? n)
      1
      (* n (factorial (- n 1))))))</code></pre>
<p>In Clojure:</p>
<pre class="prettyprint"><code class="clojure language-clojure">(defn factorial [n]
  (reduce * (range 1 (inc n))))</code></pre>
<h3 id="scheme">Scheme</h3>
<p>Scheme has became a family itself, with a lotta different variations, not only
different implementations, but different language variations too.</p>
<p>Its most important variations are <a href="https://www.gnu.org/software/guile/">Guile</a>, <a href="https://www.gnu.org/software/mit-scheme/">MIT Scheme</a>, and
<a href="https://racket-lang.org/">Racket</a> (formerly PLT Scheme).</p>
<p>Racket is a full <a href="https://en.wikipedia.org/wiki/Rapid_application_development">RAD</a> platform, containing an IDE called
<a href="https://docs.racket-lang.org/drracket/">DrRacket</a>, WYSIWYG interface builder called <a href="https://pkgs.racket-lang.org/package/mred-designer">MrEd Designer</a>,
and the PLT interpreter.</p>
<p>The interpreter supports <a href="http://www.schemers.org/Documents/Standards/R5RS/">R⁵RS</a>, <a href="http://www.r6rs.org/">R⁶RS</a>, <a href="https://docs.racket-lang.org/">PLT</a>,
<a href="https://docs.racket-lang.org/lazy/">Lazy Racket</a>, and even <a href="https://planet.racket-lang.org/display.ss?package=c.plt&amp;owner=jaymccarthy">C</a>.</p>
<p>For example, the factorial in Racket:</p>
<pre class="prettyprint"><code class="scheme language-scheme">!#racket

(define factorial
  (λ (n)
    [if (zero? n)
      1
      (* n (factorial (- n 1)))]))</code></pre>
<p>The hash-bang line tells which language Racket must deal with:</p>
<ul>
<li>R⁵RS: <code>#!r5rs</code></li>
<li>R⁶RS: <code>#!r6rs</code></li>
<li>PLT: <code>#!racket</code></li>
<li>Lazy Racket: <code>#!lazy</code></li>
<li>C: <code>#!planet jaymccarthy/c</code></li>
</ul>
<h3 id="accumulators">Accumulators</h3>
<p>Accumulator is a functional programming design pattern for dealing with stack
overflow by taking advantage of <a href="http://wiki.c2.com/?TailCallOptimization">tail-call optimisation</a> (TCO).</p>
<p>Let’s take the factorial again: the step is defined as the current value times
its predecessor’s factorial; the stop is zero’s factorial, which equals one.</p>
<pre class="prettyprint"><code>n! = n × (n-1)!
0! = 1</code></pre>
<p>If you take a look at the PLT implementation above, you can see the last call
id <code>'*</code>; in order to enable TCO, it should be <code>factorial</code>.</p>
<p>It must exist an accumulator-driven function to make it possible, so the
<code>factorial</code> becomes:</p>
<pre class="prettyprint"><code class="scheme language-scheme">(define factorial
  (λ (n)
    *factorial* n 1))</code></pre>
<p>The accumulator-driven version (<code>*factorial*</code>) must receive the original
parameter and the accumulator, returning the accumulator when it stops:</p>
<pre class="prettyprint"><code class="scheme language-scheme">(define *factorial*
  (λ (n acc)
    [if (zero? n)
      acc
      (*factorial* (- n 1) (* acc n))]))</code></pre>
<p>Note that now the last call is <code>*factorial*</code>, enabling the TCO.</p>
<h3 id="lazy-evaluation">Lazy evaluation</h3>
<p>The most efficient approach to deal with huge calculated data volumes is
<a href="https://en.wikipedia.org/wiki/Lazy_evaluation">lazy evaluation</a>, or call-by-need. <a href="https://www.haskell.org/">Haskell</a>, for
instance, just evaluates its calls by demand, which enables to build infinite
lists:</p>
<pre class="prettyprint"><code class="haskell language-haskell">fib :: [Integer]
fib = 1 : 1 : zipWith (+) fib (tail fib)</code></pre>
<p>Than on can take only how many elements one needs:</p>
<pre class="prettyprint"><code class="haskell language-haskell">take 10 fib</code></pre>
<h3 id="promises">Promises</h3>
<p><a href="https://docs.racket-lang.org/lazy/">Lazy Racket</a> uses promises to delay the evaluation, in a similar
taste as Haskell.</p>
<p>The evaluation of a lazy function is made by the function <code>'!!</code>.</p>
<p>So the lazy factorial is:</p>
<pre class="prettyprint"><code class="scheme language-scheme">#!lazy

(provide factorial)

(define *factorial*
  (λ (n acc)
    [if (zero? n)
      acc
      (*factorial* (- n 1) (* acc n))]))

(define factorial
  (*factorial* n 1))</code></pre>
<p>And one can evaluate it by calling:</p>
<pre class="prettyprint"><code class="scheme language-scheme">(!! [map (λ (n) `(,n ,(factorial n))) '(0 1 2 3 4 5)])</code></pre>
<p>The result is:</p>
<pre class="prettyprint"><code class="scheme language-scheme">'((0 1) (1 1) (2 2) (3 6) (4 24) (5 120))</code></pre>
<hr />
<p>Translated from <a href="/2017/11/lisp.html">here</a> and <a href="/2017/11/lazy-racket.html">here</a>.</p>
<p class="small" > Also in <a href="https://dev.to/cacilhas/lisp-473j">DEV Community 👩‍💻👨‍💻</a>.</p>
        </div>
        <div id="tags" class="pull-right tags">
          <script>
            var tags = 'concept functional lisp'
            if (tags) {
              var first = true
              for (var tag of tags.split(" ")) {
                if (first) { first = false }
                else $('#tags').append('&nbsp;|&nbsp;')
                $('#tags').append(
                  '<a href="/?tag=' + tag + '" class="tag">' + tag + '</a>'
                )
              }
            }
          </script>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-body">
          <div id="disqus_thread">
            <noscript>
              Please enable JavaScript to view the comments
              <a href="https://disqus.com/?ref_noscript">powered by Disqus</a>.
            </noscript>
          </div>
          <script>
            var disqus_config = function() {
              this.page = this.page || {}
              this.page.url = 'https://kodumaro.cacilhas.info/2020/11/lisp.html'
              this.page.identifier = '_source.posts.2020-11-03-lisp'
              this.page.title = 'LISP'
            }
            $(document).ready(function() {
              var d = document, s = d.createElement('script')
              s.src = 'https://kodumaro.disqus.com/embed.js'
              s.setAttribute('data-timestamp', +new Date())
              ;(d.head || d.body).appendChild(s)
            })
          </script>
        </div>
      </div>
      <div>
        <div class="pull-left">
          <script async="async" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px;"
               data-ad-client="ca-pub-5741846017654057" data-ad-slot=""></ins>
          <script>(adsbygoogle = window.adsbygoogle || []).push({})</script>
        </div>
      </div>
    </div>
    <div class="panel-footer" id="footer">
      <p class="pull-left small">
        <a href="https://dev.to/cacilhas">
          <img src="https://d2fltix0v2e0sb.cloudfront.net/dev-badge.svg"
               alt="DEV Profile 👩‍💻👨‍💻"
               height="30" width="30"
               style="vertical-align: middle; border: none;" />
        </a>
      </p>
      <p class="small">
        Arĥimedeς Montegasppα Cacilhας
        &nbsp;
        <a ref="license" href="http://creativecommons.org/licenses/by/4.0/deed">
          <img rel="license"
               alt="CC-BY 4.0"
               src="https://i.creativecommons.org/l/by/4.0/80x15.png"
               style="vertical-align: middle; border: none;" />
        </a>
      </p>
    </div>
    <script src="//cacilhas.info/js/bootstrap.min.js"></script>
    <script src="//cacilhas.info/js/ie10-viewport-bug-workaround.js"></script>
    <script language="javascript">
      $(document).ready(function() {
        $('[title]').tooltip();
      })
    </script>
  </body>
</html>

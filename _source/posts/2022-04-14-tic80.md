---
title: Yin-Yang symbol on TIC-80
date: 2022-04-14
tags: lua fantasy-console game-engine
image: //cacilhas.info/img/tic80.png
permalink: /2022/04/tic-80.html
---
[dome]: https://domeengine.com/
[js]: https://developer.mozilla.org/en-US/docs/Web/JavaScript
[lua]: https://www.lua.org/
[moonscript]: https://moonscript.org/
[sky-gradient]: https://github.com/nesbox/TIC-80/wiki/Sky-gradient
[squirrel]: http://www.squirrel-lang.org/
[tic80]: https://tic80.com/
[wren]: http://wren.io/
[yin-yang.moon]: //cacilhas.info/misc/tic80/yin-yang.moon
[yin-yang.tic]: //cacilhas.info/misc/tic80/yin-yang.tic

<div class="text-center"><iframe width="560" height="315" src="https://www.youtube.com/embed/LxRiY2P9apw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>

{:class="mg-first"} [TIC-80][tic80] is a free fantasy console for making,
playing, and sharing tiny games.

It has lots of built-in tools for development, like code, sprites, maps, sound
editors, a command line, and a Surf browser.

Its main development language is [Lua][lua], but it supports a bunch of other
languages too, such as [Moonscript][moonscript], [Javascript][js], [Wren][wren],
and [Squirrel][squirrel].

> Talking about Wren by the way, you can check the amazing [Dome][dome] game
> engine.

Aiming to build a brief presentation, I’m coding a turning Yin-Yang symbol.

### Opening TIC-80

Once you open the application, you got the prompt:

```
TIC-80 tiny computer
version 0.90.1723 (9c38a80)
https://tic80.com (C) 2017-2021

hello! type help for help

>
```

Or something like this. In order to start a new project, use the `NEW` command,
informing the language you mean to use:

```
> NEW moon
new cart is created
```

### Coding headers and background

Now press `Escape` to enter the code editor. It starts with a boilerplate we
don’t need, let’s delete the code, keeping only the headers:

```moonscript
-- title:  game title
-- author: game developer
-- desc:   short description
-- script: moon
```

Update the headers to reflect our intension:

```moonscript
-- title:  Yin Yang
-- author: Kodumaro
-- script: moon
export ^
```

We’re gonna do some black magic hereafter… This code was taken from the
[TIC-80’s wiki][sky-gradient], and creates a beautiful blue background gradient:

```moonscript
fst_tick = true

SCN==>
 poke 0x3fc1,@
 poke 0x3fc2,@+120

TIC=->
 if fst_tick
  cls!
  fst_tick=false
```

The `fst_tick` variable grants the `cls!` (clear screen) is called only once.

**Note:** TIC-80 code cannot be larger than 65&nbsp;536 characters, so avoid
unnecessary whitespaces.

If nothing is wrong, when you press <abbr title="Control+R">C-r</abbr>, you’re
gonna get the following background:

{:class="text-center"} ![Sky Gradient](//cacilhas.info/img/tic80/sky-gradient.png)

`Escape` leads you back to the prompt, `escape` again to the code editor.

### Creating the Yin-Yang symbol

Now we need to initialise the variables:

- `c` for the screen centre – TIC-8 resolution is 240×136
- `sin` and `cos` for the trigonometrical functions – taken from `math` package
- `pi` for  π – taken from `math` package
- `tau` for τ – calculated from `pi`
- `angle` to control the turning angle
- `rm` and `rM` for smaller and greater circle radii respectively
- `yin` and `yang` for the colours

In TIC-80, colours are stored in a palette, defaults to:

{:class="text-center"} ![Sweetie-16](//cacilhas.info/img/tic80/sweetie-16.png)

So the variables are initialised:

```moonscript
c=x:120,y:68
:sin,:cos,:pi=math
tau=pi*2
angle=0
rm=3
rM=20
yin=15
yang=12
```

The black eye centre is calculated as a 2D vector of the current angle, away
from the screen centre using the greater radius:

```moonscript
 c1=x:c.x+cos(angle)*rM,y:c.y+sin(angle)*rM
```

The white eye centre is 180° away from the other one:

```moonscript
 a2=angle+pi
```

And the centre is calculated from the angle `a2`:

```moonscript
  c2=x:c.x+cos(a2)*rM,y:c.y+sin(a2)*rM
```

Now we need to draw four circles:

1. A big dark one in `c1`
1. A big light one in `c2`
1. A small light one in `c1`
1. A small dark one in `c2`

Which, using the TIC-8 assets, is:

```moonscript
 circ c1.x,c1.y,rM,yin
 circ c2.x,c2.y,rM,yang
 circ c1.x,c1.y,rm,yang
 circ c2.x,c2.y,rm,yin
```

At the function end, the angle is updated by 180° a second – since TIC-80
framerate is 60Hz, 3° a tick:

```moonscript
 angle=(angle+pi/60)%tau
```

Running you must get the turning symbol:

{:class="text-center"} ![Sky Gradient](//cacilhas.info/img/tic80/yin-yang.png)

### Resouces

Download the Moonscript code from [here][yin-yang.moon], or the cartridge from
[here][yin-yang.tic].
